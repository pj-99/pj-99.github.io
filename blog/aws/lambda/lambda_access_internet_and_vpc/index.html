<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><link rel="icon shortcut" href=/favicon.ico sizes=32x32><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=icon href=/favicon-dark.svg type=image/svg+xml media="(prefers-color-scheme: dark)"><link rel=icon href=/favicon-16x16.png type=image/png sizes=16x16><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel=apple-touch-icon href=/apple-touch-icon.png sizes=180x180><link fetchpriority=low href=/site.webmanifest rel=manifest><title>AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC â€“ PJ's Blog</title>
<meta name=description content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›ï¼Œé‚„æœ‰ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPCï¼Ÿ"><link rel=canonical href=https://pj-99.github.io/blog/aws/lambda/lambda_access_internet_and_vpc/ itemprop=url><meta property="og:title" content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC"><meta property="og:description" content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›ï¼Œé‚„æœ‰ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPCï¼Ÿ"><meta property="og:type" content="article"><meta property="og:url" content="https://pj-99.github.io/blog/aws/lambda/lambda_access_internet_and_vpc/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-01-08T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-09T05:27:20+08:00"><meta itemprop=name content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC"><meta itemprop=description content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›ï¼Œé‚„æœ‰ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPCï¼Ÿ"><meta itemprop=datePublished content="2025-01-08T00:00:00+00:00"><meta itemprop=dateModified content="2025-01-09T05:27:20+08:00"><meta itemprop=wordCount content="1812"><meta itemprop=keywords content="AWS, Lambda"><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC"><meta name=twitter:description content="AWS Lambda çš„ç¶²è·¯èƒ½åŠ›ï¼Œé‚„æœ‰ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPCï¼Ÿ"><link rel=preload href=/css/compiled/main.min.53c9617cf9cb82685ec5af463dec3ecab7f3b4c3ad5c9cf22185fc7cf9b39519.css as=style integrity="sha256-U8lhfPnLgmhexa9GPew+yrfztMOtXJzyIYX8fPmzlRk="><link href=/css/compiled/main.min.53c9617cf9cb82685ec5af463dec3ecab7f3b4c3ad5c9cf22185fc7cf9b39519.css rel=stylesheet integrity="sha256-U8lhfPnLgmhexa9GPew+yrfztMOtXJzyIYX8fPmzlRk="><link href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css rel=stylesheet integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><link rel=preconnect href=https://www.googletagmanager.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-49EC99BQJ5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-49EC99BQJ5")</script><script>const defaultTheme="system",setDarkTheme=()=>{document.documentElement.classList.add("dark"),document.documentElement.style.colorScheme="dark"},setLightTheme=()=>{document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light"};"color-theme"in localStorage?localStorage.getItem("color-theme")==="dark"?setDarkTheme():setLightTheme():(defaultTheme==="dark"?setDarkTheme():setLightTheme(),defaultTheme==="system"&&(window.matchMedia("(prefers-color-scheme: dark)").matches?setDarkTheme():setLightTheme()))</script></head><body dir=ltr><div class="nav-container hx-sticky hx-top-0 hx-z-20 hx-w-full hx-bg-transparent print:hx-hidden"><div class="nav-container-blur hx-pointer-events-none hx-absolute hx-z-[-1] hx-h-full hx-w-full hx-bg-white dark:hx-bg-dark hx-shadow-[0_2px_4px_rgba(0,0,0,.02),0_1px_0_rgba(0,0,0,.06)] contrast-more:hx-shadow-[0_0_0_1px_#000] dark:hx-shadow-[0_-1px_0_rgba(255,255,255,.1)_inset] contrast-more:dark:hx-shadow-[0_0_0_1px_#fff]"></div><nav class="hx-mx-auto hx-flex hx-items-center hx-justify-end hx-gap-2 hx-h-16 hx-px-6 hx-max-w-[90rem]"><a class="hx-flex hx-items-center hover:hx-opacity-75 ltr:hx-mr-auto rtl:hx-ml-auto" href=/><span class="hx-mx-2 hx-font-extrabold hx-inline hx-select-none" title="PJ's Blog">PJ's Blog</span>
</a><a title=About href=/about class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"><span class=hx-text-center>About</span>
</a><a title=Blog href=/blog class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-font-medium"><span class=hx-text-center>Blog</span>
</a><a title=Projects href=/projects class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"><span class=hx-text-center>Projects</span>
</a><a title=Tags href=/tags class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"><span class=hx-text-center>Tags</span>
</a><a title="Contact â†—" href=https://github.com/pj-99 target=_blank rel=noreferer class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"><span class=hx-text-center>Contact â†—</span></a><div class="search-wrapper hx-relative md:hx-w-64"><div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300"><input placeholder=Search... class="search-input hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm hx-bg-black/[.05] dark:hx-bg-gray-50/10 focus:hx-bg-white dark:focus:hx-bg-dark placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current" type=search spellcheck=false>
<kbd class="hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex">CTRL K</kbd></div><div><ul class="search-results hextra-scrollbar hx-hidden hx-border hx-border-gray-200 hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900 hx-absolute hx-top-full hx-z-20 hx-mt-2 hx-overflow-auto hx-overscroll-contain hx-rounded-xl hx-py-2.5 hx-shadow-xl hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx-inset-x-0 ltr:md:hx-left-auto rtl:md:hx-right-auto contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50 hx-w-screen hx-min-h-[100px] hx-max-w-[min(calc(100vw-2rem),calc(100%+20rem))]" style="transition:max-height .2s ease 0s"></ul></div></div><button type=button aria-label=Menu class="hamburger-menu -hx-mr-2 hx-rounded hx-p-2 active:hx-bg-gray-400/20 md:hx-hidden"><svg height="24" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8H20"/></g><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16H20"/></g></svg></button></nav></div><div class="hx-mx-auto hx-flex hx-max-w-screen-xl"><div class="mobile-menu-overlay [transition:background-color_1.5s_ease] hx-fixed hx-inset-0 hx-z-10 hx-bg-black/80 dark:hx-bg-black/60 hx-hidden"></div><aside class="sidebar-container hx-flex hx-flex-col print:hx-hidden md:hx-top-16 md:hx-shrink-0 md:hx-w-64 md:hx-self-start max-md:[transform:translate3d(0,-100%,0)] md:hx-hidden xl:hx-block"><div class="hx-px-4 hx-pt-4 md:hx-hidden"><div class="search-wrapper hx-relative md:hx-w-64"><div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300"><input placeholder=Search... class="search-input hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm hx-bg-black/[.05] dark:hx-bg-gray-50/10 focus:hx-bg-white dark:focus:hx-bg-dark placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current" type=search spellcheck=false>
<kbd class="hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex">CTRL K</kbd></div><div><ul class="search-results hextra-scrollbar hx-hidden hx-border hx-border-gray-200 hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900 hx-absolute hx-top-full hx-z-20 hx-mt-2 hx-overflow-auto hx-overscroll-contain hx-rounded-xl hx-py-2.5 hx-shadow-xl hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx-inset-x-0 ltr:md:hx-left-auto rtl:md:hx-right-auto contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50 hx-w-screen hx-min-h-[100px] hx-max-w-[min(calc(100vw-2rem),calc(100%+20rem))]" style="transition:max-height .2s ease 0s"></ul></div></div></div><div class="hextra-scrollbar hx-overflow-y-auto hx-overflow-x-hidden hx-p-4 hx-grow md:hx-h-[calc(100vh-var(--navbar-height)-var(--menu-height))]"><ul class="hx-flex hx-flex-col hx-gap-1 md:hx-hidden"><li><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/posts/>Posts</a></li><li class=open><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/blog/>Blog
<span class=hextra-sidebar-collapsible-button><svg fill="none" viewBox="0 0 24 24" stroke="currentcolor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"/></svg></span></a><div class="ltr:hx-pr-0 hx-overflow-hidden"><ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col open"><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
sidebar-active-item hx-bg-primary-100 hx-font-semibold hx-text-primary-800 contrast-more:hx-border contrast-more:hx-border-primary-500 dark:hx-bg-primary-400/10 dark:hx-text-primary-600 contrast-more:dark:hx-border-primary-500" href=/blog/aws/lambda/lambda_access_internet_and_vpc/>AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC</a><ul class='hx-flex hx-flex-col hx-gap-1 hx-relative before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] dark:before:hx-bg-neutral-800 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-pr-3 rtl:before:hx-right-0 ltr:hx-ml-3 rtl:hx-mr-3'><li><a href=#aws-lambda-%e7%9a%84%e7%b6%b2%e8%b7%af%e8%83%bd%e5%8a%9b-attach-vpc-or-no-vpc class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50">AWS Lambda çš„ç¶²è·¯èƒ½åŠ›: attach-VPC or no-VPC</a></li><li><a href=#aws-lambda-%e5%a6%82%e4%bd%95%e5%ad%98%e5%8f%96%e5%a4%96%e7%b6%b2%e5%92%8c-vpc class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50">AWS Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC</a></li><li><a href=#lambda-destination-%e5%b0%87-lambda-%e7%b5%90%e6%9e%9c%e5%82%b3%e4%b8%8b%e5%8e%bb class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50">Lambda destination: å°‡ Lambda çµæœå‚³ä¸‹å»</a></li><li><a href=#%e5%b0%8f%e7%b5%90 class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50">å°çµ</a></li><li><a href=#references class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50">References</a></li></ul></li><li class="hx-flex hx-flex-col"><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/blog/git/merge_two_repos/>Git - How to merge two repositories into one using git subtree add</a></li><li class="hx-flex hx-flex-col"><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/blog/go/go_channels/>Go - Channels</a></li></ul></div></li><li><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/about/>Hi, I'm PJ.</a></li><li><a class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50" href=/projects/>Projects</a></li></ul><div class="max-xl:hx-hidden hx-h-0 hx-w-64 hx-shrink-0"></div></div><div class="md:hx-hidden hx-sticky hx-bottom-0 hx-bg-white dark:hx-bg-dark hx-mx-4 hx-py-4 hx-shadow-[0_-12px_16px_#fff] hx-flex hx-items-center hx-gap-2 dark:hx-border-neutral-800 dark:hx-shadow-[0_-12px_16px_#111] contrast-more:hx-border-neutral-400 contrast-more:hx-shadow-none contrast-more:dark:hx-shadow-none hx-border-t" data-toggle-animation=show><div class="hx-flex hx-grow hx-flex-col"><button title="Change theme" data-theme=light class="theme-toggle hx-group hx-h-7 hx-rounded-md hx-px-2 hx-text-left hx-text-xs hx-font-medium hx-text-gray-600 hx-transition-colors dark:hx-text-gray-400 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50" type=button aria-label="Change theme"><div class="hx-flex hx-items-center hx-gap-2 hx-capitalize"><svg height="12" class="group-data-[theme=light]:hx-hidden" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span class="group-data-[theme=light]:hx-hidden">Light</span><svg height="12" class="group-data-[theme=dark]:hx-hidden" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg><span class="group-data-[theme=dark]:hx-hidden">Dark</span></div></button></div></div></aside><nav class="hextra-toc hx-order-last hx-hidden hx-w-64 hx-shrink-0 xl:hx-block print:hx-hidden hx-px-4" aria-label="table of contents"><div class="hextra-scrollbar hx-sticky hx-top-16 hx-overflow-y-auto hx-pr-4 hx-pt-6 hx-text-sm [hyphens:auto] hx-max-h-[calc(100vh-var(--navbar-height)-env(safe-area-inset-bottom))] ltr:hx--mr-4 rtl:hx--ml-4"><p class="hx-mb-4 hx-font-semibold hx-tracking-tight">On this page</p><ul><li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6"><a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href=#aws-lambda-%e7%9a%84%e7%b6%b2%e8%b7%af%e8%83%bd%e5%8a%9b-attach-vpc-or-no-vpc>AWS Lambda çš„ç¶²è·¯èƒ½åŠ›: attach-VPC or no-VPC</a></li><li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6"><a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href=#aws-lambda-%e5%a6%82%e4%bd%95%e5%ad%98%e5%8f%96%e5%a4%96%e7%b6%b2%e5%92%8c-vpc>AWS Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC</a></li><li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6"><a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href=#lambda-destination-%e5%b0%87-lambda-%e7%b5%90%e6%9e%9c%e5%82%b3%e4%b8%8b%e5%8e%bb>Lambda destination: å°‡ Lambda çµæœå‚³ä¸‹å»</a></li><li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6"><a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href=#%e5%b0%8f%e7%b5%90>å°çµ</a></li><li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6"><a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href=#references>References</a></li></ul><div class="hx-mt-8 hx-border-t hx-bg-white hx-pt-8 hx-shadow-[0_-12px_16px_white] dark:hx-bg-dark dark:hx-shadow-[0_-12px_16px_#111] hx-sticky hx-bottom-0 hx-flex hx-flex-col hx-items-start hx-gap-2 hx-pb-8 dark:hx-border-neutral-800 contrast-more:hx-border-t contrast-more:hx-border-neutral-400 contrast-more:hx-shadow-none contrast-more:dark:hx-border-neutral-400"><a class="hx-text-xs hx-font-medium hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-100 contrast-more:hx-text-gray-800 contrast-more:dark:hx-text-gray-50" href=https://github.com/imfing/hextra-starter-template/edit/main/content/blog/aws/lambda/lambda_access_internet_and_vpc.md target=_blank rel=noreferer>Edit this page on GitHub â†’</a>
<button aria-hidden=true id=backToTop onclick=scrollUp() class="hx-transition-all hx-duration-75 hx-opacity-0 hx-text-xs hx-font-medium hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-100 contrast-more:hx-text-gray-800 contrast-more:dark:hx-text-gray-50">
<span>Scroll to top</span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="hx-inline ltr:hx-ml-1 rtl:hx-mr-1 hx-h-3.5 hx-w-3.5 hx-border hx-rounded-full hx-border-gray-500 hover:hx-border-gray-900 dark:hx-border-gray-400 dark:hover:hx-border-gray-100 contrast-more:hx-border-gray-800 contrast-more:dark:hx-border-gray-50"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5"/></svg></button></div></div></nav><article class="hx-w-full hx-break-words hx-flex hx-min-h-[calc(100vh-var(--navbar-height))] hx-min-w-0 hx-justify-center hx-pb-8 hx-pr-[calc(env(safe-area-inset-right)-1.5rem)]"><main class="hx-w-full hx-min-w-0 hx-max-w-6xl hx-px-6 hx-pt-4 md:hx-px-12"><div class="hx-mt-1.5 hx-flex hx-items-center hx-gap-1 hx-overflow-hidden hx-text-sm hx-text-gray-500 dark:hx-text-gray-400 contrast-more:hx-text-current"><div class="hx-whitespace-nowrap hx-transition-colors hx-min-w-[24px] hx-overflow-hidden hx-text-ellipsis hover:hx-text-gray-900 dark:hover:hx-text-gray-100"><a href=/blog/>Blog</a></div><svg class="hx-w-3.5 hx-shrink-0 rtl:-hx-rotate-180" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg><div class="hx-whitespace-nowrap hx-transition-colors hx-font-medium hx-text-gray-700 contrast-more:hx-font-bold contrast-more:hx-text-current dark:hx-text-gray-100 contrast-more:dark:hx-text-current">AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC</div></div><h1 class="hx-mt-2 hx-text-4xl hx-font-bold hx-tracking-tight hx-text-slate-900 dark:hx-text-slate-100">AWS Lambda çš„ç¶²è·¯èƒ½åŠ›å’Œ Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC</h1><div class="hx-mt-4 hx-mb-16 hx-text-gray-500 hx-text-sm hx-flex hx-items-center hx-flex-wrap hx-gap-y-2"><span class=hx-mr-1>January 8, 2025</span></div><div class=content><p>Lambda çš„ç¶²è·¯èƒ½åŠ›å¯ä»¥åˆ†ç‚ºå…©ç¨®ï¼Œæœ‰é€£æ¥åˆ° VPC æˆ–æ²’æœ‰ã€‚</p><p>æœ€è¿‘åšå°ˆæ¡ˆæ™‚ï¼Œæƒ³å˜—è©¦ç”¨ Lambda å°‡ç¬¬ä¸‰æ–¹ API å›å‚³çš„è³‡æ–™å­˜å…¥ VPC å…§çš„ RDSï¼Œä½†åœ¨éç¨‹ä¸­ç™¼ç¾ï¼Œåœ¨é è¨­ï¼ˆæ²’æœ‰ç‰¹åˆ¥è¨­å®š NAT ç­‰ã€æ²’æœ‰ä»€éº¼é ç®—ï¼‰çš„æƒ…æ³ä¸‹ï¼Œç„¡æ³•ç›´æ¥è®“ä¸€å€‹ Lambda åŒæ™‚å­˜å–å¤–ç¶²æœå‹™åˆå­˜å– VPCï¼Œç¶“éä¸€ç•ªæ™æ‰ï¼Œæœ€å¾Œé€éã€Œå°‡äº‹æƒ…åˆ†çµ¦ä¸åŒ Lambda é‚„æœ‰ç”¨ Lambda destination å‚³è³‡æ–™ã€ä¾†è§£æ±ºé€™å€‹å•é¡Œã€‚</p><p>é€™ç¯‡æœƒå…ˆç°¡å–®ä»‹ç´¹ AWS Lambda çš„ç¶²è·¯èƒ½åŠ›ï¼Œå†ä»‹ç´¹ Lambda å­˜å–å¤–ç¶²å’Œ VPC çš„ä¸€ç¨®æ–¹æ³•ã€‚</p><h2>AWS Lambda çš„ç¶²è·¯èƒ½åŠ›: attach-VPC or no-VPC<span class="hx-absolute -hx-mt-20" id=aws-lambda-çš„ç¶²è·¯èƒ½åŠ›-attach-vpc-or-no-vpc></span>
<a href=#aws-lambda-%e7%9a%84%e7%b6%b2%e8%b7%af%e8%83%bd%e5%8a%9b-attach-vpc-or-no-vpc class=subheading-anchor aria-label="Permalink for this section"></a></h2><p>åœ¨è¨­å®š Lambda æ™‚ï¼Œæœ‰å€‹é¸é …æ˜¯ <code>Enable VPC</code>ï¼Œæ‰“é–‹ä¹‹å¾Œå°±å¯ä»¥é¸è¦è®“ Lambda é€£æ¥åˆ°å“ªå€‹ VPCï¼Œé€éé€™å€‹è¨­å®šå°±èƒ½è®“ Lambda å­˜å–åˆ° VPC å…§çš„è³‡æºã€‚
<img src=/attachments/VPC_internet_lambda_enable_VPC.png alt loading=lazy>
ä¸€é–‹å§‹åœ¨è¶•è‘—å¯¦ä½œå‡ºå°ˆæ¡ˆåŠŸèƒ½æ™‚ï¼Œé‚„ä»¥ç‚ºæŠŠé€™å€‹ <code>Enable VPC</code> å‹¾å‹¾èµ·ä¾†ï¼Œå°±åƒæ˜¯æŠŠ Lambda æ”¾åœ¨ VPC å…§ï¼Œå¾Œä¾†çœ‹åˆ°å®˜æ–¹è³‡æ–™èˆ‡å…¶ä»–å¤§å¤§çš„æ•´ç†ï¼Œæ‰ç™¼ç¾å…¶å¯¦èƒŒå¾Œç™¼ç”Ÿçš„äº‹æƒ…ä¸¦ä¸æ˜¯æƒ³åƒçš„é€™æ¨£ï¼Œèƒ½å¤ å­˜å– VPC çš„ Lambda æ²’æœ‰çœŸçš„æ”¾åœ¨ VPC å…§ï¼Œè€Œæ˜¯å®ƒå¯ä»¥<strong>é€£æ¥åˆ° VPC</strong> (attach-VPC)ã€‚</p><p>ä»¥ä¸‹ä½¿ç”¨çš„ç¤ºæ„åœ–ä¾†æºç‚º <a href=https://d1.awsstatic.com/events/reinvent/2020/AWS_Lambda_networking_best_practices_SVS312.pdf target=_blank rel=noopener>AWS re:Invent 2020 AWS Lambda networking best practices</a>ï¼Œè£¡é¢æœ‰è¨±å¤šé—œæ–¼ Lambda networking è©³ç›¡ä¸”é™„åœ–çš„ä»‹ç´¹ï¼Œæ¨æ¨ã€‚</p><p>é¦–å…ˆéœ€è¦çŸ¥é“çš„èƒŒæ™¯çŸ¥è­˜æ˜¯ï¼Œæ‰€æœ‰çš„ Lambda éƒ½è¢«æ”¾åœ¨ AWS ç®¡ç†çš„ Lambda service VPC ä¸­åŸ·è¡Œï¼Œå‘¼å« Lambda éƒ½æ˜¯çµ±ä¸€é€é Lambda service APIï¼š
<img src=/attachments/Lambda_services_VPC.png alt="Lambda Services VPC" width=300></p><p>è€Œ Lambda çš„ç¶²è·¯é€£ç·šèƒ½åŠ›åˆ†ç‚ºå…©ç¨®ï¼Œå¦‚ä¸‹é¢é€™å¼µåœ–çš„ no-VPC æˆ–æ˜¯é€£æ¥ VPCã€‚</p><img src=/attachments/Lambda_networking_modes.png><p>é è¨­çš„ no-VPC æ¨¡å¼è®“ Lambda å¯ä»¥å­˜å–ç¶²éš›ç¶²è·¯ä¸Šçš„æ±è¥¿ï¼Œä¸èƒ½å­˜å– VPC çš„è³‡æºï¼ˆç•¢ç«Ÿæ˜¯ Virtual <strong>private</strong> cloudï¼‰ã€‚</p><p>è€Œå°‡ <code>Enable VPC</code> æ¨¡å¼æ‰“å‹¾å¾Œï¼ŒLambda é‚„æ˜¯æœƒè¢«æ”¾åœ¨ Lambda service VPC è£¡ï¼Œä½†æ˜¯é€™å€‹ Lambda çš„æ‰€æœ‰ç¶²è·¯æµé‡éƒ½æœƒè¢«å°åˆ°é¸æ“‡çš„ VPCï¼Œä¹Ÿå› æ­¤å¦‚æœ VPC æ²’æœ‰ç‰¹åˆ¥è¨­å®šï¼ˆåƒæ˜¯ NAT ç­‰ç­‰ï¼‰ï¼Œé‚£éº¼é€™å€‹ Lambda æ˜¯ä¸èƒ½è·Ÿå¤–ç¶²è³‡æºæºé€šçš„ã€‚</p><ul><li>ä¸­é–“ç™¼ç”Ÿäº†ä»€éº¼äº‹æƒ…å¯ä»¥çœ‹ <a href=https://d1.awsstatic.com/events/reinvent/2020/AWS_Lambda_networking_best_practices_SVS312.pdf target=_blank rel=noopener>AWS Lambda networking best practices</a> çš„è©³ç›¡ä»‹ç´¹</li></ul><h2>AWS Lambda å¦‚ä½•å­˜å–å¤–ç¶²å’Œ VPC<span class="hx-absolute -hx-mt-20" id=aws-lambda-å¦‚ä½•å­˜å–å¤–ç¶²å’Œ-vpc></span>
<a href=#aws-lambda-%e5%a6%82%e4%bd%95%e5%ad%98%e5%8f%96%e5%a4%96%e7%b6%b2%e5%92%8c-vpc class=subheading-anchor aria-label="Permalink for this section"></a></h2><p>é‚£éº¼æ²’æœ‰é ç®—å¯ä»¥é–‹ NAT çš„æƒ…æ³ä¸‹ï¼Œè©²æ€éº¼åšæ‰èƒ½è®“ Lambda å¯ä»¥å­˜å–å¤–ç¶²ã€åˆå­˜å– VPC å‘¢ï¼Ÿ</p><p>Google äº†ä¸€é™£å­ï¼Œå¾ä¸€ä½å¤§å¤§åˆ†äº«çš„ <a href=https://3lexw.medium.com/aws-%E6%9C%AD%E8%A8%98-3-%E5%88%A9%E7%94%A8-aws-s3-%E4%BD%9C%E7%82%BA-aws-lambda-%E5%87%BD%E6%95%B8%E4%B9%8B%E9%96%93%E7%9A%84%E4%B8%AD%E8%BD%89%E7%AB%99-982d40e6e20f target=_blank rel=noopener>AWS Lambda åšç¶²è·¯çˆ¬èŸ²</a>çš„æ–‡ç« èªè­˜åˆ° Lambda destination å¯ä»¥ç”¨ä¾†å‚³é Lambda ä¹‹é–“çš„è³‡æ–™ï¼Œä¹Ÿçœ‹åˆ°å¯ä»¥å°‡ Lambda æ‰“å¤–ç¶²çš„çµæœå­˜åœ¨ s3 ä¸Šï¼Œå†ç”¨å¦ä¸€å€‹ Lambda å¾ s3 è®€æª”åšé€²ä¸€æ­¥è™•ç†ã€‚</p><p>å¾é€™æµç¨‹å­¸åˆ°ä¸€ç¨®åšæ³•æ˜¯ï¼šä¸è¦åªä¾·é™ä¸€å€‹ Lambdaï¼Œä¸­é–“çš„è³‡æ–™å‚³éå»å°±å¥½ã€‚ç¾å…¶åé‚„å¯ä»¥è¦–ä½œã€Œè§£è€¦ Lambdaã€ğŸ˜¼</p><p>å›åˆ°è¦å°‡å¤–ç¶²è³‡æ–™å­˜å› RDS çš„ç›®æ¨™ï¼Œæˆ‘å°‡ã€Œå­˜å–ç¶²è·¯è³‡æ–™ã€èˆ‡ã€Œå¯«å…¥ DB ã€åˆ†é–‹ï¼šå­˜å–å¤–ç¶²çš„äº‹çµ¦ no-VPC çš„ Lambda åšï¼Œå¯« DB çš„äº‹å°±çµ¦ VPC çš„ Lambda åšï¼Œä¹Ÿç”¨ s3 ä¾†å„²å­˜ä¸­é–“ç”¢ç‰©ã€‚</p><p>ä½†è·Ÿä¸Šé¢æ–‡ç« ä¸ä¸€æ¨£çš„æ˜¯ï¼Œæˆ‘ä¸æ˜¯è¨­å®š s3 æœƒ trigger ç¬¬äºŒå€‹ Lambdaï¼Œè€Œæ˜¯è®“ç¬¬ä¸€å€‹ Lambda é€é Lambda destination è§¸ç™¼ç¬¬äºŒå€‹ Lambdaï¼Œç¬¬äºŒå€‹ Lambda å†ä¸»å‹•å¾ s3 ä¸‹è¼‰æª”æ¡ˆã€‚</p><p>é€™æ¨£çš„åšæ³•éœ€è¦é¡å¤–è¨­å®š VPC çš„ s3 <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/gateway-endpoints.html target=_blank rel=noopener>gateway endpoint</a>ï¼Œè®“ VPC çš„ç¶²è·¯æµé‡ä¸ç”¨ç¶“éå¤–ç¶²å†åˆ° s3ï¼Œè€Œæ˜¯é€é gateway endpoint ç›´æ¥å‚³åˆ° s3ã€‚</p><ul><li>s3 å’Œ dynamo DB æ˜¯ AWS æœå‹™ä¸­å°‘æ•¸å¯ä»¥å…è²»åœ¨ VPC ä¸­ä½¿ç”¨ gateway endpoint çš„æœå‹™ã€‚</li></ul><p>æ•´é«”æµç¨‹å¦‚ä¸‹åœ–ï¼Œ<del>æƒ³ä¸å¤ªèµ·ä¾†è‡ªå·±ç‚ºä»€éº¼é€™æ¨£åšè€Œä¸æ˜¯åƒä¸Šé¢æ–‡ç« ç›´æ¥å¾ s3 trigger</del></p><img src=/attachments/VPC_internet_lambda_s3.png width=500><p>ç¸½ä¹‹é€™å€‹æµç¨‹æ˜¯å¯ä»¥æ­£å¸¸é‹ä½œçš„ï¼Œä½†æ˜¯å¾Œä¾†è€ƒé‡åˆ°æˆ‘å€‘å°ˆæ¡ˆçš„éœ€æ±‚ï¼Œé€™æ¢æµç¨‹æ¯ 10 åˆ†é˜å°±æœƒè¢«è§¸ç™¼ä¸€æ¬¡ï¼Œä¸€å€‹æœˆå°±æœƒ PUT 4300 å¤šæ¬¡ï¼Œå› æ­¤é€™æ¨£æœƒç”¨å…‰å…è²»æ–¹æ¡ˆæä¾›çš„ä¸€å€‹æœˆ 2000 æ¬¡çš„ PUTï¼Œä¸æ˜¯å€‹é©åˆæ²’æœ‰ä»€éº¼é ç®—çš„æ–¹æ³•ã€‚</p><p>æ–¼æ˜¯ç¶“éç ”ç©¶ï¼Œåˆèª¿æ•´äº†ä¸€ä¸‹æµç¨‹ï¼Œç›´æ¥ç”¨ <strong>Lambda destination</strong> é€™å€‹åŠŸèƒ½ä¾†å‚³ä¸­é–“ç”¢ç‰©ã€‚</p><h2>Lambda destination: å°‡ Lambda çµæœå‚³ä¸‹å»<span class="hx-absolute -hx-mt-20" id=lambda-destination-å°‡-lambda-çµæœå‚³ä¸‹å»></span>
<a href=#lambda-destination-%e5%b0%87-lambda-%e7%b5%90%e6%9e%9c%e5%82%b3%e4%b8%8b%e5%8e%bb class=subheading-anchor aria-label="Permalink for this section"></a></h2><p>Lambda destination å¯ä»¥å°‡ Lambda çš„åŸ·è¡Œçµæœå‚³éçµ¦å¦ä¸€å€‹æœå‹™ï¼Œé‚„å¯ä»¥è¨­å®šç•¶æˆåŠŸå†å‚³æˆ–æ˜¯å¤±æ•—æ™‚å†å‚³ï¼Œç›®å‰å¯ä»¥å‚³éçš„ç›®æ¨™æœå‹™åŒ…å«ï¼šSNS, SQS, Lambda, EventBridgeã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œä½ å¯ä»¥è¨­å®šæŸå€‹è¦ç›£æ§çš„ A Lambda æœ‰ä¸€æ¢ on Failure çš„ destination åˆ°å¦ä¸€å€‹é€šçŸ¥ç”¨çš„ Lambdaï¼Œè‹¥ A Lambda æŸå¤©åŸ·è¡Œå¤±æ•—ï¼Œå°±æœƒå°‡å¤±æ•—çš„çµæœå‚³éçµ¦æœƒç™¼é€šçŸ¥çš„ Lambdaã€‚</p><p>ä½†ä½¿ç”¨ Lambda destination æ™‚è¦æ³¨æ„ï¼š</p><ul><li>Lambda çš„å‘¼å«æ–¹å¼æœ‰åˆ† sync å’Œ asyncï¼Œå¯ä»¥ç”¨ã€Œéœ€ä¸éœ€è¦ç«‹åˆ»å¾—åˆ°å›å‚³å€¼ã€ä¾†åˆ¤æ–·æ˜¯å“ªç¨®ï¼Œ<strong>åªæœ‰ async å‘¼å«æ–¹å¼æœƒè§¸ç™¼ lambda destination</strong>ï¼Œæ‰€è§¸ç™¼çš„å¦ä¸€å€‹ lambda ä¹Ÿæ˜¯ async å‘¼å«ã€‚<ul><li>ä¾‹å¦‚ï¼Œåœ¨ AWS console ç”¨ test æˆ³å®ƒæ˜¯ syncï¼Œæ‰€ä»¥ä¸æœƒè§¸ç™¼ lambda destinationã€‚è¢« EventBridge çš„ event è§¸ç™¼å‰‡æ˜¯ asyncã€‚</li><li>è©³ç´°å¯ä»¥åƒè€ƒé€™ç¾¤å¤§å¤§çš„æ•´ç†: <a href=https://www.trek10.com/blog/lambda-destinations-what-we-learned-the-hard-way target=_blank rel=noopener>lambda-destinations-what-we-learned-the-hard-way</a></li></ul></li><li>å¦‚æœç›®æ¨™æœå‹™æ˜¯å¦ä¸€å€‹ Lambdaï¼Œé‚£ payload å°±æœƒå—é™æ–¼ <a href=https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html target=_blank rel=noopener>Lambda async invocation payload çš„é™åˆ¶</a>ï¼Œ<strong>payload ä¸Šé™åªæœ‰ 256 KB</strong>ã€‚</li></ul><p>ç‚ºäº†è®“ payload ä¸è¦å¤ªå¤§ï¼Œå¯ä»¥å£“ç¸®è³‡æ–™ã€‚</p><p>åƒæ˜¯æˆ‘å€‘å°ˆæ¡ˆä½¿ç”¨äº† gzip ä¾†å£“ç¸®ï¼Œä¾‹å¦‚åŸæœ¬çš„ JSON æ˜¯ 279 KB ï¼Œé€é gzip å£“ç¸®ï¼Œå¯ä»¥é™ä½åˆ° 19 KBã€‚</p><p>æœ€çµ‚å¯¦ä½œçš„æµç¨‹å…¶å¯¦å¾ˆç°¡å–®ï¼Œå¦‚ä¸‹åœ–ï¼šno-VPC Lambda å…ˆæ‰“å¤–ç¶²ï¼Œå°‡è³‡æ–™å£“ç¸®ä¸¦å›å‚³ï¼Œå†é€é Lambda destination å°‡è³‡æ–™å‚³éçµ¦ VPC Lambdaï¼Œæœ€å¾Œå†èˆ‡ VPC å…§çš„è³‡æºæºé€šã€‚</p><img src=/attachments/VPC_internet_lambda_destination.png width=500><h2>å°çµ<span class="hx-absolute -hx-mt-20" id=å°çµ></span>
<a href=#%e5%b0%8f%e7%b5%90 class=subheading-anchor aria-label="Permalink for this section"></a></h2><p>ç¶²è·¯ä¸Šé‚„æœ‰è¨±å¤šé—œæ–¼é€™å€‹å•é¡Œçš„è±å¯Œè¨è«–èˆ‡æ–¹æ³•æ¯”è¼ƒï¼Œé€™ç¯‡æåˆ°çš„åªæ˜¯å…¶ä¸­ä¸€ç¨®åšæ³•ï¼Œåƒæ˜¯å¦‚æœä½ è¦å­˜å–å¤–ç¶²åªæ˜¯ç‚ºäº†ç”¨ AWS æœ¬èº«æœå‹™çš„è©±ï¼Œé‚£å¾ˆé«˜æ©Ÿç‡æœƒæœ‰å…¶ä»–æ›´é©åˆçš„æ–¹æ³•ã€‚</p><p>ä½†å¦‚æœä½ çš„éœ€æ±‚å’Œé€™ç¯‡æè¿°çš„æƒ…å¢ƒé¡ä¼¼ï¼Œæ˜¯ async è§¸ç™¼çš„ã€è¦å­˜å–ç¬¬ä¸‰æ–¹æœå‹™ã€è³‡æ–™ä¸å¤§ï¼Œé‚£æ‹†åˆ†æˆå…©å€‹ Lambda ä¸¦é€é destination å‚³éæˆ–è¨±æ˜¯å€‹ç°¡å–®çš„é¸æ“‡ã€‚</p><h2>References<span class="hx-absolute -hx-mt-20" id=references></span>
<a href=#references class=subheading-anchor aria-label="Permalink for this section"></a></h2><ul><li><a href=https://d1.awsstatic.com/events/reinvent/2020/AWS_Lambda_networking_best_practices_SVS312.pdf target=_blank rel=noopener>https://d1.awsstatic.com/events/reinvent/2020/AWS_Lambda_networking_best_practices_SVS312.pdf</a></li><li><a href=https://stackoverflow.com/questions/52992085/why-cant-an-aws-lambda-function-inside-a-public-subnet-in-a-vpc-connect-to-the target=_blank rel=noopener>https://stackoverflow.com/questions/52992085/why-cant-an-aws-lambda-function-inside-a-public-subnet-in-a-vpc-connect-to-the</a></li><li><a href=https://medium.com/@arunasilva86/how-to-use-vpc-networking-effectively-for-lambda-445abefdf8cf target=_blank rel=noopener>https://medium.com/@arunasilva86/how-to-use-vpc-networking-effectively-for-lambda-445abefdf8cf</a></li><li><a href=https://aws.amazon.com/tw/blogs/compute/announcing-improved-vpc-networking-for-aws-lambda-functions/ target=_blank rel=noopener>https://aws.amazon.com/tw/blogs/compute/announcing-improved-vpc-networking-for-aws-lambda-functions/</a></li><li><a href=https://aws.amazon.com/tw/blogs/compute/using-aws-lambda-iam-condition-keys-for-vpc-settings/ target=_blank rel=noopener>https://aws.amazon.com/tw/blogs/compute/using-aws-lambda-iam-condition-keys-for-vpc-settings/</a></li><li><a href=https://3lexw.medium.com/aws-%E6%9C%AD%E8%A8%98-3-%E5%88%A9%E7%94%A8-aws-s3-%E4%BD%9C%E7%82%BA-aws-lambda-%E5%87%BD%E6%95%B8%E4%B9%8B%E9%96%93%E7%9A%84%E4%B8%AD%E8%BD%89%E7%AB%99-982d40e6e20f target=_blank rel=noopener>https://3lexw.medium.com/aws-%E6%9C%AD%E8%A8%98-3-%E5%88%A9%E7%94%A8-aws-s3-%E4%BD%9C%E7%82%BA-aws-lambda-%E5%87%BD%E6%95%B8%E4%B9%8B%E9%96%93%E7%9A%84%E4%B8%AD%E8%BD%89%E7%AB%99-982d40e6e20f</a></li></ul></div><div class=hx-mt-16></div><div class="hx-mb-8 hx-flex hx-items-center hx-border-t hx-pt-8 dark:hx-border-neutral-800 contrast-more:hx-border-neutral-400 dark:contrast-more:hx-border-neutral-400 print:hx-hidden"><a href=/blog/git/merge_two_repos/ title="Git - How to merge two repositories into one using git subtree add" class="hx-flex hx-max-w-[50%] hx-items-center hx-gap-1 hx-py-4 hx-text-base hx-font-medium hx-text-gray-600 hx-transition-colors [word-break:break-word] hover:hx-text-primary-600 dark:hx-text-gray-300 md:hx-text-lg ltr:hx-pr-4 rtl:hx-pl-4"><svg class="hx-inline hx-h-5 hx-shrink-0 ltr:hx-rotate-180" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>Git - How to merge two repositories into one using git subtree add</a></div></main></article></div><footer class="hextra-footer hx-bg-gray-100 hx-pb-[env(safe-area-inset-bottom)] dark:hx-bg-neutral-900 print:hx-bg-transparent"><div class="hx-mx-auto hx-flex hx-gap-2 hx-py-2 hx-px-4 hx-max-w-screen-xl"><button title="Change theme" data-theme=light class="theme-toggle hx-group hx-h-7 hx-rounded-md hx-px-2 hx-text-left hx-text-xs hx-font-medium hx-text-gray-600 hx-transition-colors dark:hx-text-gray-400 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50" type=button aria-label="Change theme"><div class="hx-flex hx-items-center hx-gap-2 hx-capitalize"><svg height="12" class="group-data-[theme=light]:hx-hidden" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span class="group-data-[theme=light]:hx-hidden">Light</span><svg height="12" class="group-data-[theme=dark]:hx-hidden" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg><span class="group-data-[theme=dark]:hx-hidden">Dark</span></div></button></div><hr class=dark:hx-border-neutral-800><div class="hx-max-w-screen-xl hx-mx-auto hx-flex hx-justify-center hx-py-12 hx-pl-[max(env(safe-area-inset-left),1.5rem)] hx-pr-[max(env(safe-area-inset-right),1.5rem)] hx-text-gray-600 dark:hx-text-gray-400 md:hx-justify-start"><div class="hx-flex hx-w-full hx-flex-col hx-items-center sm:hx-items-start"><div class=hx-font-semibold><a class="hx-flex hx-text-sm hx-items-center hx-gap-1 hx-text-current" target=_blank rel="noopener noreferrer" title="Hextra GitHub Homepage" href=https://github.com/imfing/hextra><span>Powered by Hextra<svg height="1em" class="hx-inline-block ltr:hx-ml-1 rtl:hx-mr-1 hx-align-[-2.5px]" viewBox="0 0 180 180" fill="currentcolor"><path fill-rule="evenodd" clip-rule="evenodd" d="m105.50024 22.224647c-9.59169-5.537563-21.40871-5.537563-31.000093.0L39.054693 42.689119C29.463353 48.226675 23.55484 58.460531 23.55484 69.535642v40.928918c0 11.07542 5.908513 21.3092 15.499853 26.84652l35.445453 20.46446c9.591313 5.53732 21.408404 5.53732 31.000094.0l35.44507-20.46446c9.59131-5.53732 15.49985-15.7711 15.49985-26.84652V69.535642c0-11.075111-5.90854-21.308967-15.49985-26.846523zM34.112797 85.737639c-1.384445 2.397827-1.384445 5.352099.0 7.749927l24.781554 42.922974c1.38437 2.39783 3.942853 3.87496 6.711592 3.87496h49.563107c2.76905.0 5.3273-1.47713 6.71144-3.87496l24.78194-42.922974c1.38414-2.397828 1.38414-5.3521.0-7.749927L121.88049 42.814746c-1.38414-2.397828-3.94239-3.874964-6.71144-3.874964H65.605944c-2.768739.0-5.327223 1.477059-6.711592 3.874964z" style="stroke-width:.774993"/></svg></span></a></div></div></div></footer><script defer src=/js/main.min.998f7d6b2520d6d9875145cbe14b35964b365b44b3b1bfa6b797a74a9c173b07.js integrity="sha256-mY99ayUg1tmHUUXL4Us1lks2W0Szsb+mt5enSpwXOwc="></script><script defer src=/lib/flexsearch/flexsearch.bundle.min.0425860527cc9968f9f049421c7a56b39327d475e2e3a8f550416be3a9134327.js integrity="sha256-BCWGBSfMmWj58ElCHHpWs5Mn1HXi46j1UEFr46kTQyc="></script><script defer src=/en.search.min.3db95834d7cbb513c5e7bd8ff469faec73b56798f9d73f74f2e09a725dbbeac2.js integrity="sha256-PblYNNfLtRPF572P9Gn67HO1Z5j51z908uCacl276sI="></script></body></html>